# 完成一件事的N种姿势

<!-- @import "[TOC]" {cmd="toc" depthFrom=2 depthTo=6 orderedList=false} -->

<!-- code_chunk_output -->

- [完成一件事的N种姿势](#完成一件事的n种姿势)
  - [完整克隆一个对象的三种方式](#完整克隆一个对象的三种方式)
  - [this到底指向谁](#this到底指向谁)
  - [5种遍历对象的方式](#5种遍历对象的方式)

<!-- /code_chunk_output -->

## 完整克隆一个对象的三种方式
```ts
// 这两个是相等的，只是浅拷贝了a的实例属性，但是没有拷贝原型链
let aClone = { ...a };
let aClone = Object.assign({}, a);

// 3种完整的克隆方法 
const clone1 = {
  // __proto__属性在非浏览器的环境不一定部署，因此推荐使用写法二和写法三。
  __proto__: Object.getPrototypeOf(obj),
  ...obj
};

const clone2 = Object.assign(
  Object.create(Object.getPrototypeOf(obj)),
  obj
);

const clone3 = Object.create(
  Object.getPrototypeOf(obj),
  Object.getOwnPropertyDescriptors(obj)
)
```

## this到底指向谁
基本上，理解**this指向它的调用者**，已经够用了。
找到this的一些总结：
- 由new调用：绑定到新创建的对象
- 由call或apply、bind调用：绑定到指定的对象
- 由上下文对象调用：绑定到上下文对象
- 箭头函数：继承外层函数调用的this绑定
- 作为一个DOM事件处理函数: 指向触发事件的元素e.target
- 默认：全局对象

## 5种遍历对象的方式
- `for...in`:遍历自身 + 继承的可枚举属性（不含 Symbol 属性）。
- `Object.keys(obj)`: 返回对象自身的（不含继承）所有可枚举属性（不含 Symbol 属性）的键名。
- `Object.getOwnPropertyNames(obj)`: 返回对象自身的（不含继承）所有可枚举 + 不可枚举属性（不含 Symbol）的键名。
- `Object.getOwnPropertySymbols(obj)`: 返回对象自身的所有 Symbol 属性的键名。
- `Reflect.ownKeys(obj)`: 返回对象自身的（不含继承）所有可枚举 + 不可枚举属性（含 Symbol）的键名。